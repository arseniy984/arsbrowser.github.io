import logging
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import Application, CommandHandler, CallbackQueryHandler, MessageHandler, filters, ContextTypes
import asyncio
from datetime import datetime

# ========== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø ==========


# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
)
logger = logging.getLogger(__name__)

# –•—Ä–∞–Ω–∏–ª–∏—â–µ –∑–∞—è–≤–æ–∫ –Ω–∞ –ø–µ—Å–Ω–∏ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ë–î)
song_requests = {}

# ========== –ö–õ–ê–í–ò–ê–¢–£–†–´ ==========
def get_main_keyboard():
    """–û—Å–Ω–æ–≤–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å –≤–∫–ª–∞–¥–∫–∞–º–∏"""
    keyboard = [
        [InlineKeyboardButton("üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞", callback_data='support')],
        [InlineKeyboardButton("‚ùì –ü–æ–º–æ—â—å/–ü—Ä–∞–≤–∏–ª–∞", callback_data='help')],
        [InlineKeyboardButton("üéµ –ó–∞–∫–∞–∑–∞—Ç—å –ø–µ—Å–Ω—é", callback_data='request_song')],
        [InlineKeyboardButton("üìÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ", callback_data='schedule')],
        [InlineKeyboardButton("üìç –ö–æ–Ω—Ç–∞–∫—Ç—ã", callback_data='contacts')],
    ]
    return InlineKeyboardMarkup(keyboard)

def get_back_keyboard():
    """–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –º–µ–Ω—é"""
    keyboard = [
        [InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é", callback_data='back')]
    ]
    return InlineKeyboardMarkup(keyboard)

def get_song_keyboard():
    """–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ –ø–µ—Å–µ–Ω"""
    keyboard = [
        [InlineKeyboardButton("üìã –ü—Ä–∞–≤–∏–ª–∞ –∑–∞–∫–∞–∑–∞", callback_data='song_rules')],
        [InlineKeyboardButton("üéµ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É", callback_data='send_song')],
        [InlineKeyboardButton("üìã –ú–æ–∏ –∑–∞—è–≤–∫–∏", callback_data='my_requests')],
        [InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data='back')]
    ]
    return InlineKeyboardMarkup(keyboard)

# ========== –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –ö–û–ú–ê–ù–î ==========
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start"""
    user = update.effective_user
    
    welcome_text = f"""
    üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –¥–µ—Ç—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä ¬´–°–æ–ø–∫–∏¬ª –≥. –ó–∞–ø–æ–ª—è—Ä–Ω—ã–π! üèîÔ∏è

    –ü—Ä–∏–≤–µ—Ç, {user.first_name}! üëã

    –ú—ã ‚Äî –º–µ—Å—Ç–æ, –≥–¥–µ –¥–µ—Ç–∏ –∏ –ø–æ–¥—Ä–æ—Å—Ç–∫–∏ –º–æ–≥—É—Ç:
    ‚Ä¢ –í–µ—Å–µ–ª–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ –≤—Ä–µ–º—è –Ω–∞ –¥–∏—Å–∫–æ—Ç–µ–∫–∞—Ö
    ‚Ä¢ –ó–∞–∫–∞–∑—ã–≤–∞—Ç—å –ª—é–±–∏–º—ã–µ –ø–µ—Å–Ω–∏
    ‚Ä¢ –£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –∏–≥—Ä–∞—Ö –∏ –∫–æ–Ω–∫—É—Ä—Å–∞—Ö
    ‚Ä¢ –ù–∞–π—Ç–∏ –Ω–æ–≤—ã—Ö –¥—Ä—É–∑–µ–π
    ‚Ä¢ –ë–µ–∑–æ–ø–∞—Å–Ω–æ –æ—Ç–¥–æ—Ö–Ω—É—Ç—å

    üéµ **–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ–±—è:**
    –•–æ—á–µ—à—å —É—Å–ª—ã—à–∞—Ç—å —Å–≤–æ—é –ª—é–±–∏–º—É—é –ø–µ—Å–Ω—é –Ω–∞ –¥–∏—Å–∫–æ—Ç–µ–∫–µ?
    –ñ–º–∏ ¬´–ó–∞–∫–∞–∑–∞—Ç—å –ø–µ—Å–Ω—é¬ª –∏ —Å–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º!

    –í—ã–±–µ—Ä–∏ —Ä–∞–∑–¥–µ–ª –Ω–∏–∂–µ:
    """
    
    await update.message.reply_text(
        welcome_text,
        reply_markup=get_main_keyboard()
    )

# ========== –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –ö–ù–û–ü–û–ö ==========
async def button_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ inline-–∫–Ω–æ–ø–∫–∏"""
    query = update.callback_query
    await query.answer()
    
    user_id = query.from_user.id
    data = query.data
    
    responses = {
        'support': {
            'text': """
            üÜò **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –≤–æ–ø—Ä–æ—Å—ã**
            
            üìû **–¢–µ–ª–µ—Ñ–æ–Ω—ã:**
            ‚Ä¢ –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å —Ü–µ–Ω—Ç—Ä–∞: +7 (XXX) XXX-XX-XX
            ‚Ä¢ –ü–µ–¥–∞–≥–æ–≥-–æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä: +7 (XXX) XXX-XX-XX
            ‚Ä¢ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã: +7 (XXX) XXX-XX-XX
            
            üïí **–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏:**
            –ü–Ω-–ü—Ç: 10:00 - 19:00
            –°–±: 12:00 - 18:00
            –í—Å: 12:00 - 17:00
            
            üí¨ **–ü–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º:**
            –ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä—è–º–æ –∑–¥–µ—Å—å, –∏ –º—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏.
            
            ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –¥–µ—Ç–µ–π –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Ä–æ–¥–∏—Ç–µ–ª—è–º!
            """,
            'keyboard': get_back_keyboard()
        },
        
        'help': {
            'text': """
            üìã **–ü—Ä–∞–≤–∏–ª–∞ –¥–µ—Ç—Å–∫–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ ¬´–°–æ–ø–∫–∏¬ª**
            
            üéØ **–ù–∞—à–∞ –º–∏—Å—Å–∏—è:**
            –°–æ–∑–¥–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∏ –≤–µ—Å–µ–ª–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è –æ—Ç–¥—ã—Ö–∞ –¥–µ—Ç–µ–π –∏ –ø–æ–¥—Ä–æ—Å—Ç–∫–æ–≤!
            
            üë´ **–î–ª—è –∫–æ–≥–æ –º—ã:**
            ‚Ä¢ –î–µ—Ç–∏ –æ—Ç 12 –¥–æ 17 –ª–µ—Ç
            ‚Ä¢ –ü–æ–¥—Ä–æ—Å—Ç–∫–∏, –∏—â—É—â–∏–µ –ø–æ–∑–∏—Ç–∏–≤–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ
            ‚Ä¢ –í—Å–µ, –∫—Ç–æ —Ö–æ—á–µ—Ç –≤–µ—Å–µ–ª–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ –≤—Ä–µ–º—è
            
            ‚úÖ **–ú–æ–∂–Ω–æ –∏ –Ω—É–∂–Ω–æ:**
            ‚Ä¢ –¢–∞–Ω—Ü–µ–≤–∞—Ç—å –∏ –≤–µ—Å–µ–ª–∏—Ç—å—Å—è
            ‚Ä¢ –û–±—â–∞—Ç—å—Å—è —Å–æ —Å–≤–µ—Ä—Å—Ç–Ω–∏–∫–∞–º–∏
            ‚Ä¢ –£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –∫–æ–Ω–∫—É—Ä—Å–∞—Ö
            ‚Ä¢ –ó–∞–∫–∞–∑—ã–≤–∞—Ç—å –ª—é–±–∏–º—ã–µ –ø–µ—Å–Ω–∏
            ‚Ä¢ –ü—Ä–æ—Å–∏—Ç—å –ø–æ–º–æ—â–∏ —É –≤–∑—Ä–æ—Å–ª—ã—Ö
            
            ‚ùå **–ù–µ–ª—å–∑—è:**
            ‚Ä¢ –ü—Ä–∏—Ö–æ–¥–∏—Ç—å –±–µ–∑ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è –≤–∑—Ä–æ—Å–ª—ã—Ö (–¥–æ 14 –ª–µ—Ç)
            ‚Ä¢ –ü—Ä–∏–Ω–æ—Å–∏—Ç—å —Å–≤–æ–∏ –Ω–∞–ø–∏—Ç–∫–∏ –∏ –µ–¥—É
            ‚Ä¢ –ö—É—Ä–∏—Ç—å –∏ —É–ø–æ—Ç—Ä–µ–±–ª—è—Ç—å –∞–ª–∫–æ–≥–æ–ª—å
            ‚Ä¢ –ü–æ—Ä—Ç–∏—Ç—å –∏–º—É—â–µ—Å—Ç–≤–æ —Ü–µ–Ω—Ç—Ä–∞
            ‚Ä¢ –û—Å–∫–æ—Ä–±–ª—è—Ç—å –¥—Ä—É–≥–∏—Ö –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π
            
            ‚è∞ **–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:**
            –ü—Ç-–°–±: 18:00 - 22:00 (–¥–ª—è 12-14 –ª–µ—Ç)
            –ü—Ç-–°–±: 20:00 - 00:00 (–¥–ª—è 15-17 –ª–µ—Ç)
            """,
            'keyboard': get_back_keyboard()
        },
        
        'request_song': {
            'text': """
            üéµ **–ó–∞–∫–∞–∑ –ø–µ—Å–µ–Ω –Ω–∞ –¥–∏—Å–∫–æ—Ç–µ–∫—É!**
            
            –•–æ—á–µ—à—å —É—Å–ª—ã—à–∞—Ç—å —Å–≤–æ—é –ª—é–±–∏–º—É—é –ø–µ—Å–Ω—é?
            –ú—ã –∏—Å–ø–æ–ª–Ω–∏–º —Ç–≤–æ—é –º–µ—á—Ç—É! üé∂
            
            **–í—ã–±–µ—Ä–∏ –¥–µ–π—Å—Ç–≤–∏–µ:**
            """,
            'keyboard': get_song_keyboard()
        },
        
        'song_rules': {
            'text': """
            üìã **–ü—Ä–∞–≤–∏–ª–∞ –∑–∞–∫–∞–∑–∞ –ø–µ—Å–µ–Ω:**
            
            1. **–ß—Ç–æ –º–æ–∂–Ω–æ –∑–∞–∫–∞–∑—ã–≤–∞—Ç—å:**
            ‚Ä¢ –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø–µ—Å–Ω–∏ (—Ä—É—Å—Å–∫–∏–µ –∏ –∑–∞—Ä—É–±–µ–∂–Ω—ã–µ)
            ‚Ä¢ –¢–∞–Ω—Ü–µ–≤–∞–ª—å–Ω—ã–µ —Ö–∏—Ç—ã
            ‚Ä¢ –†–µ—Ç—Ä–æ-—Ö–∏—Ç—ã (–¥–ª—è —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –≤–µ—á–µ—Ä–æ–≤)
            ‚Ä¢ –ü–µ—Å–Ω–∏ –∏–∑ TikTok/YouTube
            
            2. **–ß—Ç–æ –ù–ï–õ–¨–ó–Ø –∑–∞–∫–∞–∑—ã–≤–∞—Ç—å:**
            ‚Ä¢ –ü–µ—Å–Ω–∏ —Å –Ω–µ–Ω–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–π –ª–µ–∫—Å–∏–∫–æ–π
            ‚Ä¢ –¢—Ä–µ–∫–∏ —Å –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–º —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º
            ‚Ä¢ –î–ª–∏–Ω–Ω—ã–µ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ (–±–æ–ª–µ–µ 5 –º–∏–Ω—É—Ç)
            
            3. **–ö–∞–∫ –∑–∞–∫–∞–∑—ã–≤–∞—Ç—å:**
            ‚Ä¢ –ù–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Å–Ω–∏
            ‚Ä¢ –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å
            ‚Ä¢ –¢–≤–æ—ë –∏–º—è –∏ –≤–æ–∑—Ä–∞—Å—Ç
            ‚Ä¢ –ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —ç—Ç—É –ø–µ—Å–Ω—é? (–ø–æ –∂–µ–ª–∞–Ω–∏—é)
            
            4. **–í–∞–∂–Ω–æ:**
            ‚Ä¢ –ó–∞—è–≤–∫–∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è –∑–∞ 2 —á–∞—Å–∞ –¥–æ –¥–∏—Å–∫–æ—Ç–µ–∫–∏
            ‚Ä¢ –û–¥–Ω–∞ –ø–µ—Å–Ω—è –≤ –Ω–µ–¥–µ–ª—é –æ—Ç –æ–¥–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞
            ‚Ä¢ DJ –æ—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞ —Å–æ–±–æ–π –ø—Ä–∞–≤–æ –Ω–∞ –≤—ã–±–æ—Ä
            
            üéØ **–ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∑–∞—è–≤–∫–∏:**
            "Blinding Lights, The Weeknd
            –ò–º—è: –ê–Ω–Ω–∞, 15 –ª–µ—Ç
            –•–æ—á—É, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –Ω–∞—à –≥–∏–º–Ω —Å –ø–æ–¥—Ä—É–≥–∞–º–∏!"
            
            –ì–æ—Ç–æ–≤ –∑–∞–∫–∞–∑–∞—Ç—å? –ñ–º–∏ ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É¬ª!
            """,
            'keyboard': get_song_keyboard()
        },
        
        'send_song': {
            'text': """
            üé§ **–û—Ç–ø—Ä–∞–≤—å –∑–∞—è–≤–∫—É –Ω–∞ –ø–µ—Å–Ω—é!**
            
            ‚úçÔ∏è **–ù–∞–ø–∏—à–∏ –≤ –æ–¥–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏:**
            
            1. **–ù–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Å–Ω–∏**
            2. **–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å**
            3. **–¢–≤–æ—ë –∏–º—è –∏ –≤–æ–∑—Ä–∞—Å—Ç**
            4. **–ü–æ—á–µ–º—É —ç—Ç—É –ø–µ—Å–Ω—é?** (–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
            
            üìù **–ü—Ä–∏–º–µ—Ä:**
            ```
            –ü–µ—Å–Ω—è: Bad Guy
            –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å: Billie Eilish
            –ò–º—è: –ú–∞–∫—Å–∏–º, 14 –ª–µ—Ç
            –ü—Ä–∏—á–∏–Ω–∞: –ö—Ä—É—Ç–æ–π –±–∏—Ç –¥–ª—è —Ç–∞–Ω—Ü–µ–≤!
            ```
            
            ‚è≥ **–ñ–¥—É —Ç–≤–æ—é –∑–∞—è–≤–∫—É...**
            (–ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏ –µ—ë –≤ —á–∞—Ç)
            """,
            'keyboard': get_back_keyboard()
        },
        
        'my_requests': {
            'text': "",
            'keyboard': get_song_keyboard()
        },
        
        'schedule': {
            'text': """
            üìÖ **–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –Ω–µ–¥–µ–ª—é**
            
            **–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫-–ß–µ—Ç–≤–µ—Ä–≥:**
            ‚Ä¢ 15:00-18:00 ‚Äî –ò–≥—Ä–æ–≤–∞—è –∫–æ–º–Ω–∞—Ç–∞ (–Ω–∞—Å—Ç–æ–ª–∫–∏, –ø—Ä–∏—Å—Ç–∞–≤–∫–∏)
            ‚Ä¢ 16:00-17:00 ‚Äî –ú–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å—ã (—Ä—É–∫–æ–¥–µ–ª–∏–µ, —Ä–∏—Å–æ–≤–∞–Ω–∏–µ)
            
            **–ü—è—Ç–Ω–∏—Ü–∞:**
            ‚Ä¢ 18:00-22:00 ‚Äî –î–ò–°–ö–û–¢–ï–ö–ê (12-14 –ª–µ—Ç)
            ‚Ä¢ 20:00-00:00 ‚Äî –î–ò–°–ö–û–¢–ï–ö–ê (15-17 –ª–µ—Ç)
            –¢–µ–º–∞: ¬´–¢–∞–Ω—Ü–µ–≤–∞–ª—å–Ω—ã–π –º–∞—Ä–∞—Ñ–æ–Ω¬ª
            
            **–°—É–±–±–æ—Ç–∞:**
            ‚Ä¢ 14:00-17:00 ‚Äî –ö–∏–Ω–æ-–∫–ª—É–±
            ‚Ä¢ 18:00-22:00 ‚Äî –î–ò–°–ö–û–¢–ï–ö–ê (12-14 –ª–µ—Ç)
            ‚Ä¢ 20:00-00:00 ‚Äî –î–ò–°–ö–û–¢–ï–ö–ê (15-17 –ª–µ—Ç)
            –¢–µ–º–∞: ¬´–•–∏—Ç—ã TikTok¬ª
            
            **–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ:**
            ‚Ä¢ 12:00-16:00 ‚Äî –°–µ–º–µ–π–Ω—ã–π –¥–µ–Ω—å
            ‚Ä¢ 16:00-19:00 ‚Äî –¢—É—Ä–Ω–∏—Ä—ã –ø–æ –Ω–∞—Å—Ç–æ–ª—å–Ω—ã–º –∏–≥—Ä–∞–º
            
            üí∞ **–°—Ç–æ–∏–º–æ—Å—Ç—å:**
            ‚Ä¢ –î–∏—Å–∫–æ—Ç–µ–∫–∞: 150 —Ä—É–±. (–ø—Ä–∏ –ø—Ä–µ–¥—ä—è–≤–ª–µ–Ω–∏–∏ —à–∫–æ–ª—å–Ω–æ–≥–æ –±–∏–ª–µ—Ç–∞)
            ‚Ä¢ –ò–≥—Ä–æ–≤–∞—è –∫–æ–º–Ω–∞—Ç–∞: 50 —Ä—É–±./—á–∞—Å
            ‚Ä¢ –ú–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å—ã: –±–µ—Å–ø–ª–∞—Ç–Ω–æ
            """,
            'keyboard': get_back_keyboard()
        },
        
        'contacts': {
            'text': """
            üìç **–ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–µ—Ç—Å–∫–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ ¬´–°–æ–ø–∫–∏¬ª**
            
            üè¢ **–ê–¥—Ä–µ—Å:**
            –≥. –ó–∞–ø–æ–ª—è—Ä–Ω—ã–π, —É–ª. –î–µ—Ç—Å–∫–∞—è, 8
            (–≤—Ö–æ–¥ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã —à–∫–æ–ª—å–Ω–æ–≥–æ —Å—Ç–∞–¥–∏–æ–Ω–∞)
            
            üìû **–¢–µ–ª–µ—Ñ–æ–Ω—ã –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π:**
            ‚Ä¢ –°–ø—Ä–∞–≤–∫–∏ –∏ –≤–æ–ø—Ä–æ—Å—ã: +7 (XXX) XXX-XX-XX
            ‚Ä¢ –ó–∞–ø–∏—Å—å –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è: +7 (XXX) XXX-XX-XX
            ‚Ä¢ –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è —Å–≤—è–∑—å: +7 (XXX) XXX-XX-XX
            
            üë®‚Äçüë©‚Äçüëß‚Äçüë¶ **–î–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π:**
            ‚Ä¢ –¶–µ–Ω—Ç—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –ø–µ–¥–∞–≥–æ–≥–æ–≤
            ‚Ä¢ –ï—Å—Ç—å –∫–æ–º–Ω–∞—Ç–∞ –æ–∂–∏–¥–∞–Ω–∏—è –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π
            ‚Ä¢ –ü—Ä–æ–≤–æ–¥–∏–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ —Å–æ–±—Ä–∞–Ω–∏—è 1 —Ä–∞–∑ –≤ –º–µ—Å—è—Ü
            
            üöå **–ö–∞–∫ –¥–æ–±—Ä–∞—Ç—å—Å—è:**
            ‚Ä¢ –ê–≤—Ç–æ–±—É—Å—ã: ‚Ññ 3, 7, 12 (–æ—Å—Ç. ¬´–®–∫–æ–ª–∞¬ª)
            ‚Ä¢ –ú–∞—Ä—à—Ä—É—Ç–∫–∏: ‚Ññ 101, 105
            
            üÖøÔ∏è **–ü–∞—Ä–∫–æ–≤–∫–∞:** –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –ø–µ—Ä–µ–¥ —Ü–µ–Ω—Ç—Ä–æ–º
            
            üåê **–ú—ã –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö:**
            ‚Ä¢ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ: vk.com/sopki_deti
            ‚Ä¢ –¢–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª: t.me/sopki_zap_deti
            """,
            'keyboard': get_back_keyboard()
        },
        
        'back': {
            'text': "üèîÔ∏è –í—ã–±–µ—Ä–∏ –Ω—É–∂–Ω—ã–π —Ä–∞–∑–¥–µ–ª:",
            'keyboard': get_main_keyboard()
        }
    }
    
    if data == 'my_requests':
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞—è–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        user_requests = song_requests.get(user_id, [])
        if user_requests:
            requests_text = "üìã **–¢–≤–æ–∏ –∑–∞—è–≤–∫–∏ –Ω–∞ –ø–µ—Å–Ω–∏:**\n\n"
            for i, req in enumerate(user_requests[-5:], 1):  # –ü–æ—Å–ª–µ–¥–Ω–∏–µ 5 –∑–∞—è–≤–æ–∫
                requests_text += f"{i}. {req['song']} - {req['artist']}\n"
                requests_text += f"   üìÖ {req['date']}\n"
                requests_text += f"   ‚úÖ {'–ü—Ä–∏–Ω—è—Ç–∞' if req.get('approved') else '–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏'}\n\n"
            requests_text += "–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞? –ñ–º–∏ ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É¬ª!"
        else:
            requests_text = "–£ —Ç–µ–±—è –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞—è–≤–æ–∫ –Ω–∞ –ø–µ—Å–Ω–∏.\n–•–æ—á–µ—à—å —Å—Ç–∞—Ç—å –ø–µ—Ä–≤—ã–º? –ñ–º–∏ ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É¬ª!"
        
        await query.edit_message_text(
            text=requests_text,
            reply_markup=get_song_keyboard()
        )
        return
    
    if data in responses:
        await query.edit_message_text(
            text=responses[data]['text'],
            reply_markup=responses[data]['keyboard'],
            parse_mode='Markdown'
        )
        
        logger.info(f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {user_id} –Ω–∞–∂–∞–ª: {data}")

# ========== –û–ë–†–ê–ë–û–¢–ö–ê –ó–ê–Ø–í–û–ö –ù–ê –ü–ï–°–ù–ò ==========
async def handle_song_request(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞—è–≤–æ–∫ –Ω–∞ –ø–µ—Å–Ω–∏"""
    user = update.effective_user
    message = update.message
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —Ä–µ–∂–∏–º–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–∫–∏
    user_data = context.user_data
    if user_data.get('waiting_for_song'):
        # –≠—Ç–æ –∑–∞—è–≤–∫–∞ –Ω–∞ –ø–µ—Å–Ω—é
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –∑–∞—è–≤–∫—É
        user_id = user.id
        if user_id not in song_requests:
            song_requests[user_id] = []
        
        song_request = {
            'user_id': user_id,
            'user_name': user.first_name,
            'username': user.username,
            'song_text': message.text,
            'date': datetime.now().strftime("%d.%m.%Y %H:%M"),
            'approved': False
        }
        
        song_requests[user_id].append(song_request)
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ –≥—Ä—É–ø–ø—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
        admin_message = f"""
        üéµ **–ù–û–í–ê–Ø –ó–ê–Ø–í–ö–ê –ù–ê –ü–ï–°–ù–Æ**
        
        üë§ **–û—Ç:** {user.first_name} {user.last_name or ''}
        üì± @{user.username or '–±–µ–∑ username'}
        üÜî ID: {user_id}
        ‚è∞ –í—Ä–µ–º—è: {song_request['date']}
        
        üìù **–ó–∞—è–≤–∫–∞:**
        {message.text}
        
        ‚úÖ –î–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è: /approve_{user_id}_{len(song_requests[user_id])-1}
        ‚ùå –î–ª—è –æ—Ç–∫–∞–∑–∞: /reject_{user_id}_{len(song_requests[user_id])-1}
        """
        
        try:
            await context.bot.send_message(
                chat_id=ADMIN_CHAT_ID,
                text=admin_message,
                parse_mode='Markdown'
            )
            
            # –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
            await message.reply_text(
                "‚úÖ –û—Ç–ª–∏—á–Ω–æ! –¢–≤–æ—è –∑–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞ –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ DJ!\n\n"
                "–ú—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –µ—ë –≤ —Ç–µ—á–µ–Ω–∏–µ —á–∞—Å–∞ –∏ –¥–æ–±–∞–≤–∏–º –≤ –ø–ª–µ–π–ª–∏—Å—Ç, "
                "–µ—Å–ª–∏ –ø–µ—Å–Ω—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–∞–≤–∏–ª–∞–º.\n\n"
                "–°–ª–µ–¥–∏ –∑–∞ –∞–Ω–æ–Ω—Å–∞–º–∏ –Ω–∞ –¥–∏—Å–∫–æ—Ç–µ–∫–µ! üéß",
                reply_markup=get_main_keyboard()
            )
            
            logger.info(f"–ó–∞—è–≤–∫–∞ –Ω–∞ –ø–µ—Å–Ω—é –æ—Ç {user_id} –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ –≥—Ä—É–ø–ø—É")
            
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–∫–∏: {e}")
            await message.reply_text(
                "‚ö†Ô∏è –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞—è–≤–∫–∏. "
                "–ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑ –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É.",
                reply_markup=get_main_keyboard()
            )
        
        # –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–ª–∞–≥ –æ–∂–∏–¥–∞–Ω–∏—è
        user_data['waiting_for_song'] = False
    
    else:
        # –û–±—ã—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ - –ø–µ—Ä–µ—Å—ã–ª–∞–µ–º –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É
        await forward_to_support(update, context)

async def forward_to_support(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ü–µ—Ä–µ—Å—ã–ª–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É"""
    try:
        user = update.effective_user
        message = update.message
        
        # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∫–æ–º–∞–Ω–¥—ã
        if message.text and message.text.startswith('/'):
            return
        
        # –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏
        support_message = f"""
        üì© **–ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
        
        üë§ –ò–º—è: {user.first_name} {user.last_name or ''}
        üì± @{user.username or '–Ω–µ—Ç'}
        üÜî ID: {user.id}
        ‚è∞ –í—Ä–µ–º—è: {datetime.now().strftime('%d.%m.%Y %H:%M')}
        
        üìù **–°–æ–æ–±—â–µ–Ω–∏–µ:**
        {message.text if message.text else '–ú–µ–¥–∏–∞-—Ñ–∞–π–ª'}
        """
        
        # –ü–µ—Ä–µ—Å—ã–ª–∞–µ–º –≤ –≥—Ä—É–ø–ø—É
        if message.text:
            await context.bot.send_message(
                chat_id=ADMIN_CHAT_ID,
                text=support_message,
                parse_mode='Markdown'
            )
        elif message.photo:
            await context.bot.send_photo(
                chat_id=ADMIN_CHAT_ID,
                photo=message.photo[-1].file_id,
                caption=support_message
            )
        
        # –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
        await message.reply_text(
            "üì® –¢–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É. "
            "–û—Ç–≤–µ—Ç–∏–º –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è!",
            reply_markup=get_main_keyboard()
        )
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø–µ—Ä–µ—Å—ã–ª–∫–∏: {e}")

# ========== –ê–î–ú–ò–ù –ö–û–ú–ê–ù–î–´ –î–õ–Ø –ü–ï–°–ï–ù ==========
async def handle_admin_commands(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∞–¥–º–∏–Ω—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥ –¥–ª—è –ø–µ—Å–µ–Ω"""
    user_id = update.effective_user.id
    message_text = update.message.text
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∞ (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É ADMIN_USER_IDS)
    
    if message_text.startswith('/approve_'):
        try:
            # /approve_USERID_INDEX
            parts = message_text.split('_')
            target_user_id = int(parts[1])
            request_index = int(parts[2])
            
            # –ù–∞—Ö–æ–¥–∏–º –∑–∞—è–≤–∫—É
            if target_user_id in song_requests and request_index < len(song_requests[target_user_id]):
                song_requests[target_user_id][request_index]['approved'] = True
                
                # –£–≤–µ–¥–æ–º–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                try:
                    await context.bot.send_message(
                        chat_id=target_user_id,
                        text="üéâ –û—Ç–ª–∏—á–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏! –¢–≤–æ—è –∑–∞—è–≤–∫–∞ –Ω–∞ –ø–µ—Å–Ω—é –û–î–û–ë–†–ï–ù–ê! üéµ\n\n"
                             "DJ –¥–æ–±–∞–≤–∏—Ç –µ—ë –≤ –ø–ª–µ–π–ª–∏—Å—Ç —Å–ª–µ–¥—É—é—â–µ–π –¥–∏—Å–∫–æ—Ç–µ–∫–∏. "
                             "–ü—Ä–∏—Ö–æ–¥–∏ —Ç–∞–Ω—Ü–µ–≤–∞—Ç—å –ø–æ–¥ —Å–≤–æ–π —Ç—Ä–µ–∫! üíÉüï∫"
                    )
                except:
                    pass  # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –±–æ—Ç–∞
                
                await update.message.reply_text("‚úÖ –ó–∞—è–≤–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∞! –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–µ–¥–æ–º–ª–µ–Ω.")
            
        except Exception as e:
            await update.message.reply_text(f"‚ùå –û—à–∏–±–∫–∞: {e}")
    
    elif message_text.startswith('/reject_'):
        try:
            parts = message_text.split('_')
            target_user_id = int(parts[1])
            request_index = int(parts[2])
            
            # –£–≤–µ–¥–æ–º–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            try:
                await context.bot.send_message(
                    chat_id=target_user_id,
                    text="‚ÑπÔ∏è –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —Ç–≤–æ—è –∑–∞—è–≤–∫–∞ –Ω–∞ –ø–µ—Å–Ω—é –Ω–µ –ø—Ä–æ—à–ª–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é.\n\n"
                         "–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:\n"
                         "‚Ä¢ –ü–µ—Å–Ω—è –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–∞–≤–∏–ª–∞–º\n"
                         "‚Ä¢ –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞—è–≤–æ–∫ –Ω–∞ —ç—Ç–æ—Ç —Ç—Ä–µ–∫\n"
                         "‚Ä¢ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è\n\n"
                         "–ü–æ–ø—Ä–æ–±—É–π –≤—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥—É—é –ø–µ—Å–Ω—é! üé∂"
                )
            except:
                pass
            
            await update.message.reply_text("‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–µ–¥–æ–º–ª–µ–Ω –æ–± –æ—Ç–∫–∞–∑–µ.")
            
        except Exception as e:
            await update.message.reply_text(f"‚ùå –û—à–∏–±–∫–∞: {e}")

# ========== –û–ë–†–ê–ë–û–¢–ö–ê –¢–ï–ö–°–¢–û–í–´–• –°–û–û–ë–©–ï–ù–ò–ô ==========
async def handle_text_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π"""
    user_data = context.user_data
    message_text = update.message.text
    
    # –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —Ä–µ–∂–∏–º–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–µ—Å–Ω–∏
    if user_data.get('waiting_for_song'):
        await handle_song_request(update, context)
    else:
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ —Ö–æ—á–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–µ—Å–Ω—é
        if any(keyword in message_text.lower() for keyword in ['–ø–µ—Å–Ω', '–∑–∞–∫–∞–∑', '–º—É–∑—ã–∫', 'song', '—Ç—Ä–µ–∫']):
            # –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–Ω–æ–ø–∫–æ–π
            await update.message.reply_text(
                "–•–æ—á–µ—à—å –∑–∞–∫–∞–∑–∞—Ç—å –ø–µ—Å–Ω—é? –ò—Å–ø–æ–ª—å–∑—É–π –∫–Ω–æ–ø–∫—É üéµ ¬´–ó–∞–∫–∞–∑–∞—Ç—å –ø–µ—Å–Ω—é¬ª –≤ –º–µ–Ω—é!\n"
                "–¢–∞–º –∂–µ –Ω–∞–π–¥—ë—à—å –ø—Ä–∞–≤–∏–ª–∞ –∏ –ø—Ä–∏–º–µ—Ä—ã –∑–∞—è–≤–æ–∫.",
                reply_markup=get_main_keyboard()
            )
        else:
            # –ü–µ—Ä–µ—Å—ã–ª–∞–µ–º –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É
            await forward_to_support(update, context)

# ========== –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö ==========
async def error_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫"""
    logger.error(f"–û—à–∏–±–∫–∞: {context.error}")
    
    if update and update.effective_chat:
        try:
            await update.effective_chat.send_message(
                "‚ö†Ô∏è –ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫... –ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑ –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É.",
                reply_markup=get_main_keyboard()
            )
        except:
            pass

# ========== –û–°–ù–û–í–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø ==========
def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞"""
    # –°–æ–∑–¥–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    application = Application.builder().token(TOKEN).build()
    
    # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
    application.add_handler(CommandHandler("start", start))
    
    # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ inline-–∫–Ω–æ–ø–æ–∫
    application.add_handler(CallbackQueryHandler(button_handler))
    
    # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∞–¥–º–∏–Ω—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥
    application.add_handler(CommandHandler("approve", handle_admin_commands))
    application.add_handler(CommandHandler("reject", handle_admin_commands))
    
    # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
    application.add_handler(MessageHandler(
        filters.TEXT & ~filters.COMMAND, 
        handle_text_message
    ))
    
    # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –º–µ–¥–∏–∞
    application.add_handler(MessageHandler(
        filters.PHOTO | filters.DOCUMENT, 
        forward_to_support
    ))
    
    # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫
    application.add_error_handler(error_handler)
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞
    print("ü§ñ –ë–æ—Ç –¥–µ—Ç—Å–∫–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ ¬´–°–æ–ø–∫–∏¬ª –∑–∞–ø—É—â–µ–Ω!")
    print("üéµ –†–µ–∂–∏–º: –ø—Ä–∏–µ–º –∑–∞—è–≤–æ–∫ –Ω–∞ –ø–µ—Å–Ω–∏ –¥–ª—è –¥–∏—Å–∫–æ—Ç–µ–∫")
    print(f"üì® –ó–∞—è–≤–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –≥—Ä—É–ø–ø—É: {ADMIN_CHAT_ID}")
    application.run_polling(allowed_updates=Update.ALL_TYPES)

if __name__ == '__main__':
    main()